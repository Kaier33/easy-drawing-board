var EasyDrawingBoard=function(){"use strict";function t(t,e,n,r,i,o,a){try{var c=t[o](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}function e(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function c(e){t(a,i,o,c,u,"next",e)}function u(e){t(a,i,o,c,u,"throw",e)}c(void 0)}))}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}('.__edb-textarea-box {\n  position: absolute;\n  z-index: 101;\n  width: auto;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  word-wrap: break-word;\n  word-break: break-all;\n  color: #aaa;\n  border: 1px dashed gray;\n}\n.__edb-textarea-box .__edb-textarea {\n  resize: none;\n  background: transparent;\n  border: none;\n  padding: 1px;\n  outline: none;\n  font-family: "PingFang SC", "Microsoft YaHei", "微软雅黑";\n  overflow: hidden;\n}\n.__edb-text-pre {\n  position: absolute;\n  z-index: 999;\n  top: 0;\n  left: -9999px;\n  min-width: 100px;\n  display: inline-block;\n  padding: 1px;\n  border: 1px solid red;\n  font-family: "PingFang SC", "Microsoft YaHei", "微软雅黑";\n}\n.__edb-eraser-hover {\n  cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEm0lEQVRYR62XbUxbVRjH/7cUxlrWQW9fBmNsDGROwG1B6C1my5ahERcTTSRMcXIH6NwSv6gxmckMaPywxCXGQTdfMpuMwdiLbI5Fs7HhNCIGlNCOwTbGW3kr76hbJkKPuRdb29tyewDvlyb3Pvf8fs9znnN6LoP/6So0a7QEYdVKKJZNE5fV2jB6nGZohiYoWEzxdii7H7J/b9QYZiKUYcrG8T4ApMTaMF4c7N0lC7yeFqOaDv3rfpYxEVmGBJFnnxrCqd4WKoklCfCbIyMRHjLhDRcEbFNDqBAFhEu+EosW2JNpNIS4ZpxZxgRkGRI9lW6ZHESlw4YDuaniPUuVXVZiUQJ5Jm1sKMM4pPDmyQFUOewiPD3ZKAo0tjplJRYsUJSxMn5GoeyUwn+bGMCZPl+4uyxyEgsSKHhSt8E1S9qlc9400Y9zfTd9Mpd2v5dEsbVhvMT9nFqAN0elgihs0syFJXe+v1UWLlcJKoF8ky6NYUiTNPNfxh2o7r9FBRckmlqHYTljAyH/rY6gArxJy4FhfpZm3jDmwIUBevivbcNiMyavMGK9OgoXB9pACLNPViA/U7+NcbluSOH1Y734ZqCNOvPm9hERvjHCgLy4TeKM1A53oM7Z1TKvQAHHZrmAq1L4T6M9uDTYTg1vuT0qwjeo9R64W+C6szOwAG/SPwvGdVkK/3G0G5cHb1PDbXfHYDltQ5LKH17rvBd4CvgM9nkoUC2F3xjpwrdDd6jhNzsEuB2Jy3V+mQtwgIjL0WcKeE63HSB1Uvj3I134bgHwW53jKKu0IyGclcDvodbZ4bM1BxW4PtyJK8671Jm3d02grNKG+GXB4UIv+Ajk5CAkamTNpemHD7KFKjBgcNXZQQ2/0zOJsgob1oZpZcvuvUt6BPJMWo06XHUhNjElzZS9W1P58dtinPcfi9zhoqN3EqUVdsSFRs1Xdp8t2GcrfiVNFx2uDvs6em1SSmHJlxFh4SrY669AkOAeX4V9L6bIHmw6+6ZEeGxIJHXmHoFCsz4RIcpz+tXrHuEPHVNptAYPzC2xdUsMCl54LKBEV//vKK2wYbVCCvdvuEADMEXbYuojdas27zl4dPnFzz6E6ZndSM182k9iR3osXn3uUZ8xegb/QOkpG6KZlfNlHvRcyOw1a98nhCnZmbtfHPxa1TG89M6RgBJPmePwcnaSGOcY+lOEG6FZNNyzCniOfQ/AR3MSDK5VWeaV2LV1HcybVuFouR0GsiLoOpdtHu9lmM+x7zLAYe9KFH1wAutT0v2mI0avBju9dLjfPsBz2rcA5oi7EvHJT/gICC+4G3NLZAxy18wdPGuH6RouYBNKb/Ic+yaAT3fmHoAg8sWhAvE3UCUy2TiolKH4d28P2nBUAkLQXo7dTwCLICFc0kqc/eQgaf6hxmsXpfsKohYQAnlO9xpAPndXwv1ytaWYNNaeZ0AUu6CYVYMgmeYTbL5mlD0R8RzLA/jKLVFz4rCrvqZcAQUyrPVjjcE6nOZ50DNhPqfLY0DKd+S84ao7e1wBzMZbGya7aQaniQkqMNcT2lwC5vTsA2XESZvzPs3AtDH/ANJxaF2ajW5TAAAAAElFTkSuQmCC") 0 32, auto;\n}\n');var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new j(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=C(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?v:h,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function g(){}function y(){}function x(){}var m={};u(m,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(I([])));w&&w!==n&&r.call(w,o)&&(m=w);var E=x.prototype=g.prototype=Object.create(m);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,o,a,c){var u=l(t[i],t,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return y.prototype=x,u(E,"constructor",x),u(x,"constructor",y),y.displayName=u(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,a,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new O(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}({exports:{}});var a=function(t){return t&&t.Math==Math&&t},c=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof o&&o)||function(){return this}()||Function("return this")(),u={},s=function(t){try{return!!t()}catch(t){return!0}},l=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f=Function.prototype.call,h=f.bind?f.bind(f):function(){return f.apply(f,arguments)},d={},v={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,g=p&&!v.call({1:2},1);d.f=g?function(t){var e=p(this,t);return!!e&&e.enumerable}:v;var y,x,m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b=Function.prototype,w=b.bind,E=b.call,S=w&&w.bind(E),O=w?function(t){return t&&S(E,t)}:function(t){return t&&function(){return E.apply(t,arguments)}},C=O,k=C({}.toString),A=C("".slice),j=function(t){return A(k(t),8,-1)},I=O,P=s,T=j,L=c.Object,M=I("".split),R=P((function(){return!L("z").propertyIsEnumerable(0)}))?function(t){return"String"==T(t)?M(t,""):L(t)}:L,_=c.TypeError,H=function(t){if(null==t)throw _("Can't call method on "+t);return t},D=R,Y=H,F=function(t){return D(Y(t))},N=function(t){return"function"==typeof t},z=N,B=function(t){return"object"==typeof t?null!==t:z(t)},X=c,W=N,G=function(t){return W(t)?t:void 0},Q=function(t,e){return arguments.length<2?G(X[t]):X[t]&&X[t][e]},U=O({}.isPrototypeOf),K=Q("navigator","userAgent")||"",Z=c,V=K,J=Z.process,q=Z.Deno,$=J&&J.versions||q&&q.version,tt=$&&$.v8;tt&&(x=(y=tt.split("."))[0]>0&&y[0]<4?1:+(y[0]+y[1])),!x&&V&&(!(y=V.match(/Edge\/(\d+)/))||y[1]>=74)&&(y=V.match(/Chrome\/(\d+)/))&&(x=+y[1]);var et=x,nt=et,rt=s,it=!!Object.getOwnPropertySymbols&&!rt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&nt&&nt<41})),ot=it&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,at=Q,ct=N,ut=U,st=ot,lt=c.Object,ft=st?function(t){return"symbol"==typeof t}:function(t){var e=at("Symbol");return ct(e)&&ut(e.prototype,lt(t))},ht=c.String,dt=function(t){try{return ht(t)}catch(t){return"Object"}},vt=N,pt=dt,gt=c.TypeError,yt=function(t){if(vt(t))return t;throw gt(pt(t)+" is not a function")},xt=yt,mt=function(t,e){var n=t[e];return null==n?void 0:xt(n)},bt=h,wt=N,Et=B,St=c.TypeError,Ot={exports:{}},Ct=c,kt=Object.defineProperty,At=function(t,e){try{kt(Ct,t,{value:e,configurable:!0,writable:!0})}catch(n){Ct[t]=e}return e},jt=At,It="__core-js_shared__",Pt=c[It]||jt(It,{}),Tt=Pt;(Ot.exports=function(t,e){return Tt[t]||(Tt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var Lt=H,Mt=c.Object,Rt=function(t){return Mt(Lt(t))},_t=Rt,Ht=O({}.hasOwnProperty),Dt=Object.hasOwn||function(t,e){return Ht(_t(t),e)},Yt=O,Ft=0,Nt=Math.random(),zt=Yt(1..toString),Bt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+zt(++Ft+Nt,36)},Xt=c,Wt=Ot.exports,Gt=Dt,Qt=Bt,Ut=it,Kt=ot,Zt=Wt("wks"),Vt=Xt.Symbol,Jt=Vt&&Vt.for,qt=Kt?Vt:Vt&&Vt.withoutSetter||Qt,$t=function(t){if(!Gt(Zt,t)||!Ut&&"string"!=typeof Zt[t]){var e="Symbol."+t;Ut&&Gt(Vt,t)?Zt[t]=Vt[t]:Zt[t]=Kt&&Jt?Jt(e):qt(e)}return Zt[t]},te=h,ee=B,ne=ft,re=mt,ie=function(t,e){var n,r;if("string"===e&&wt(n=t.toString)&&!Et(r=bt(n,t)))return r;if(wt(n=t.valueOf)&&!Et(r=bt(n,t)))return r;if("string"!==e&&wt(n=t.toString)&&!Et(r=bt(n,t)))return r;throw St("Can't convert object to primitive value")},oe=$t,ae=c.TypeError,ce=oe("toPrimitive"),ue=function(t,e){if(!ee(t)||ne(t))return t;var n,r=re(t,ce);if(r){if(void 0===e&&(e="default"),n=te(r,t,e),!ee(n)||ne(n))return n;throw ae("Can't convert object to primitive value")}return void 0===e&&(e="number"),ie(t,e)},se=ft,le=function(t){var e=ue(t,"string");return se(e)?e:e+""},fe=B,he=c.document,de=fe(he)&&fe(he.createElement),ve=function(t){return de?he.createElement(t):{}},pe=ve,ge=!l&&!s((function(){return 7!=Object.defineProperty(pe("div"),"a",{get:function(){return 7}}).a})),ye=l,xe=h,me=d,be=m,we=F,Ee=le,Se=Dt,Oe=ge,Ce=Object.getOwnPropertyDescriptor;u.f=ye?Ce:function(t,e){if(t=we(t),e=Ee(e),Oe)try{return Ce(t,e)}catch(t){}if(Se(t,e))return be(!xe(me.f,t,e),t[e])};var ke={},Ae=c,je=B,Ie=Ae.String,Pe=Ae.TypeError,Te=function(t){if(je(t))return t;throw Pe(Ie(t)+" is not an object")},Le=l,Me=ge,Re=Te,_e=le,He=c.TypeError,De=Object.defineProperty;ke.f=Le?De:function(t,e,n){if(Re(t),e=_e(e),Re(n),Me)try{return De(t,e,n)}catch(t){}if("get"in n||"set"in n)throw He("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Ye=ke,Fe=m,Ne=l?function(t,e,n){return Ye.f(t,e,Fe(1,n))}:function(t,e,n){return t[e]=n,t},ze={exports:{}},Be=N,Xe=Pt,We=O(Function.toString);Be(Xe.inspectSource)||(Xe.inspectSource=function(t){return We(t)});var Ge,Qe,Ue,Ke=Xe.inspectSource,Ze=N,Ve=Ke,Je=c.WeakMap,qe=Ze(Je)&&/native code/.test(Ve(Je)),$e=Ot.exports,tn=Bt,en=$e("keys"),nn=function(t){return en[t]||(en[t]=tn(t))},rn={},on=qe,an=c,cn=O,un=B,sn=Ne,ln=Dt,fn=Pt,hn=nn,dn=rn,vn="Object already initialized",pn=an.TypeError,gn=an.WeakMap;if(on||fn.state){var yn=fn.state||(fn.state=new gn),xn=cn(yn.get),mn=cn(yn.has),bn=cn(yn.set);Ge=function(t,e){if(mn(yn,t))throw new pn(vn);return e.facade=t,bn(yn,t,e),e},Qe=function(t){return xn(yn,t)||{}},Ue=function(t){return mn(yn,t)}}else{var wn=hn("state");dn[wn]=!0,Ge=function(t,e){if(ln(t,wn))throw new pn(vn);return e.facade=t,sn(t,wn,e),e},Qe=function(t){return ln(t,wn)?t[wn]:{}},Ue=function(t){return ln(t,wn)}}var En={set:Ge,get:Qe,has:Ue,enforce:function(t){return Ue(t)?Qe(t):Ge(t,{})},getterFor:function(t){return function(e){var n;if(!un(e)||(n=Qe(e)).type!==t)throw pn("Incompatible receiver, "+t+" required");return n}}},Sn=l,On=Dt,Cn=Function.prototype,kn=Sn&&Object.getOwnPropertyDescriptor,An=On(Cn,"name"),jn=An&&"something"===function(){}.name,In=An&&(!Sn||Sn&&kn(Cn,"name").configurable),Pn=c,Tn=N,Ln=Dt,Mn=Ne,Rn=At,_n=Ke,Hn={EXISTS:An,PROPER:jn,CONFIGURABLE:In}.CONFIGURABLE,Dn=En.get,Yn=En.enforce,Fn=String(String).split("String");(ze.exports=function(t,e,n,r){var i,o=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet,u=r&&void 0!==r.name?r.name:e;Tn(n)&&("Symbol("===String(u).slice(0,7)&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ln(n,"name")||Hn&&n.name!==u)&&Mn(n,"name",u),(i=Yn(n)).source||(i.source=Fn.join("string"==typeof u?u:""))),t!==Pn?(o?!c&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Mn(t,e,n)):a?t[e]=n:Rn(e,n)})(Function.prototype,"toString",(function(){return Tn(this)&&Dn(this).source||_n(this)}));var Nn={},zn=Math.ceil,Bn=Math.floor,Xn=function(t){var e=+t;return e!=e||0===e?0:(e>0?Bn:zn)(e)},Wn=Xn,Gn=Math.max,Qn=Math.min,Un=function(t,e){var n=Wn(t);return n<0?Gn(n+e,0):Qn(n,e)},Kn=Xn,Zn=Math.min,Vn=function(t){return t>0?Zn(Kn(t),9007199254740991):0},Jn=Vn,qn=function(t){return Jn(t.length)},$n=F,tr=Un,er=qn,nr=function(t){return function(e,n,r){var i,o=$n(e),a=er(o),c=tr(r,a);if(t&&n!=n){for(;a>c;)if((i=o[c++])!=i)return!0}else for(;a>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}},rr={includes:nr(!0),indexOf:nr(!1)},ir=Dt,or=F,ar=rr.indexOf,cr=rn,ur=O([].push),sr=function(t,e){var n,r=or(t),i=0,o=[];for(n in r)!ir(cr,n)&&ir(r,n)&&ur(o,n);for(;e.length>i;)ir(r,n=e[i++])&&(~ar(o,n)||ur(o,n));return o},lr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fr=sr,hr=lr.concat("length","prototype");Nn.f=Object.getOwnPropertyNames||function(t){return fr(t,hr)};var dr={};dr.f=Object.getOwnPropertySymbols;var vr=Q,pr=Nn,gr=dr,yr=Te,xr=O([].concat),mr=vr("Reflect","ownKeys")||function(t){var e=pr.f(yr(t)),n=gr.f;return n?xr(e,n(t)):e},br=Dt,wr=mr,Er=u,Sr=ke,Or=s,Cr=N,kr=/#|\.prototype\./,Ar=function(t,e){var n=Ir[jr(t)];return n==Tr||n!=Pr&&(Cr(e)?Or(e):!!e)},jr=Ar.normalize=function(t){return String(t).replace(kr,".").toLowerCase()},Ir=Ar.data={},Pr=Ar.NATIVE="N",Tr=Ar.POLYFILL="P",Lr=Ar,Mr=c,Rr=u.f,_r=Ne,Hr=ze.exports,Dr=At,Yr=function(t,e,n){for(var r=wr(e),i=Sr.f,o=Er.f,a=0;a<r.length;a++){var c=r[a];br(t,c)||n&&br(n,c)||i(t,c,o(e,c))}},Fr=Lr,Nr=function(t,e){var n,r,i,o,a,c=t.target,u=t.global,s=t.stat;if(n=u?Mr:s?Mr[c]||Dr(c,{}):(Mr[c]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Rr(n,r))&&a.value:n[r],!Fr(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Yr(o,i)}(t.sham||i&&i.sham)&&_r(o,"sham",!0),Hr(n,r,o,t)}},zr=j,Br=Array.isArray||function(t){return"Array"==zr(t)},Xr={};Xr[$t("toStringTag")]="z";var Wr="[object z]"===String(Xr),Gr=c,Qr=Wr,Ur=N,Kr=j,Zr=$t("toStringTag"),Vr=Gr.Object,Jr="Arguments"==Kr(function(){return arguments}()),qr=Qr?Kr:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Vr(t),Zr))?n:Jr?Kr(e):"Object"==(r=Kr(e))&&Ur(e.callee)?"Arguments":r},$r=O,ti=s,ei=N,ni=qr,ri=Ke,ii=function(){},oi=[],ai=Q("Reflect","construct"),ci=/^\s*(?:class|function)\b/,ui=$r(ci.exec),si=!ci.exec(ii),li=function(t){if(!ei(t))return!1;try{return ai(ii,oi,t),!0}catch(t){return!1}},fi=function(t){if(!ei(t))return!1;switch(ni(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return si||!!ui(ci,ri(t))}catch(t){return!0}};fi.sham=!0;var hi=!ai||ti((function(){var t;return li(li.call)||!li(Object)||!li((function(){t=!0}))||t}))?fi:li,di=le,vi=ke,pi=m,gi=function(t,e,n){var r=di(e);r in t?vi.f(t,r,pi(0,n)):t[r]=n},yi=s,xi=et,mi=$t("species"),bi=function(t){return xi>=51||!yi((function(){var e=[];return(e.constructor={})[mi]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},wi=O([].slice),Ei=Nr,Si=c,Oi=Br,Ci=hi,ki=B,Ai=Un,ji=qn,Ii=F,Pi=gi,Ti=$t,Li=wi,Mi=bi("slice"),Ri=Ti("species"),_i=Si.Array,Hi=Math.max;Ei({target:"Array",proto:!0,forced:!Mi},{slice:function(t,e){var n,r,i,o=Ii(this),a=ji(o),c=Ai(t,a),u=Ai(void 0===e?a:e,a);if(Oi(o)&&(n=o.constructor,(Ci(n)&&(n===_i||Oi(n.prototype))||ki(n)&&null===(n=n[Ri]))&&(n=void 0),n===_i||void 0===n))return Li(o,c,u);for(r=new(void 0===n?_i:n)(Hi(u-c,0)),i=0;c<u;c++,i++)c in o&&Pi(r,i,o[c]);return r.length=i,r}});var Di=c,Yi=Br,Fi=hi,Ni=B,zi=$t("species"),Bi=Di.Array,Xi=function(t){var e;return Yi(t)&&(e=t.constructor,(Fi(e)&&(e===Bi||Yi(e.prototype))||Ni(e)&&null===(e=e[zi]))&&(e=void 0)),void 0===e?Bi:e},Wi=function(t,e){return new(Xi(t))(0===e?0:e)},Gi=Nr,Qi=c,Ui=s,Ki=Br,Zi=B,Vi=Rt,Ji=qn,qi=gi,$i=Wi,to=bi,eo=et,no=$t("isConcatSpreadable"),ro=9007199254740991,io="Maximum allowed index exceeded",oo=Qi.TypeError,ao=eo>=51||!Ui((function(){var t=[];return t[no]=!1,t.concat()[0]!==t})),co=to("concat"),uo=function(t){if(!Zi(t))return!1;var e=t[no];return void 0!==e?!!e:Ki(t)};Gi({target:"Array",proto:!0,forced:!ao||!co},{concat:function(t){var e,n,r,i,o,a=Vi(this),c=$i(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(uo(o=-1===e?a:arguments[e])){if(u+(i=Ji(o))>ro)throw oo(io);for(n=0;n<i;n++,u++)n in o&&qi(c,u,o[n])}else{if(u>=ro)throw oo(io);qi(c,u++,o)}return c.length=u,c}});var so=yt,lo=O(O.bind),fo=function(t,e){return so(t),void 0===e?t:lo?lo(t,e):function(){return t.apply(e,arguments)}},ho=fo,vo=R,po=Rt,go=qn,yo=Wi,xo=O([].push),mo=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,c=5==t||o;return function(u,s,l,f){for(var h,d,v=po(u),p=vo(v),g=ho(s,l),y=go(p),x=0,m=f||yo,b=e?m(u,y):n||a?m(u,0):void 0;y>x;x++)if((c||x in p)&&(d=g(h=p[x],x,v),t))if(e)b[x]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:xo(b,h)}else switch(t){case 4:return!1;case 7:xo(b,h)}return o?-1:r||i?i:b}},bo={forEach:mo(0),map:mo(1),filter:mo(2),some:mo(3),every:mo(4),find:mo(5),findIndex:mo(6),filterReject:mo(7)}.map;Nr({target:"Array",proto:!0,forced:!bi("map")},{map:function(t){return bo(this,t,arguments.length>1?arguments[1]:void 0)}});var wo,Eo=qr,So=c.String,Oo=function(t){if("Symbol"===Eo(t))throw TypeError("Cannot convert a Symbol value to a string");return So(t)},Co=Te,ko=s,Ao=c.RegExp,jo=ko((function(){var t=Ao("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Io=jo||ko((function(){return!Ao("a","y").sticky})),Po={BROKEN_CARET:jo||ko((function(){var t=Ao("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Io,UNSUPPORTED_Y:jo},To=sr,Lo=lr,Mo=Object.keys||function(t){return To(t,Lo)},Ro=ke,_o=Te,Ho=F,Do=Mo,Yo=l?Object.defineProperties:function(t,e){_o(t);for(var n,r=Ho(e),i=Do(e),o=i.length,a=0;o>a;)Ro.f(t,n=i[a++],r[n]);return t},Fo=Q("document","documentElement"),No=Te,zo=Yo,Bo=lr,Xo=rn,Wo=Fo,Go=ve,Qo=nn("IE_PROTO"),Uo=function(){},Ko=function(t){return"<script>"+t+"</"+"script>"},Zo=function(t){t.write(Ko("")),t.close();var e=t.parentWindow.Object;return t=null,e},Vo=function(){try{wo=new ActiveXObject("htmlfile")}catch(t){}var t,e;Vo="undefined"!=typeof document?document.domain&&wo?Zo(wo):((e=Go("iframe")).style.display="none",Wo.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ko("document.F=Object")),t.close(),t.F):Zo(wo);for(var n=Bo.length;n--;)delete Vo.prototype[Bo[n]];return Vo()};Xo[Qo]=!0;var Jo,qo,$o=Object.create||function(t,e){var n;return null!==t?(Uo.prototype=No(t),n=new Uo,Uo.prototype=null,n[Qo]=t):n=Vo(),void 0===e?n:zo(n,e)},ta=s,ea=c.RegExp,na=ta((function(){var t=ea(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),ra=s,ia=c.RegExp,oa=ra((function(){var t=ia("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),aa=h,ca=O,ua=Oo,sa=function(){var t=Co(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},la=Po,fa=Ot.exports,ha=$o,da=En.get,va=na,pa=oa,ga=fa("native-string-replace",String.prototype.replace),ya=RegExp.prototype.exec,xa=ya,ma=ca("".charAt),ba=ca("".indexOf),wa=ca("".replace),Ea=ca("".slice),Sa=(qo=/b*/g,aa(ya,Jo=/a/,"a"),aa(ya,qo,"a"),0!==Jo.lastIndex||0!==qo.lastIndex),Oa=la.BROKEN_CARET,Ca=void 0!==/()??/.exec("")[1];(Sa||Ca||Oa||va||pa)&&(xa=function(t){var e,n,r,i,o,a,c,u=this,s=da(u),l=ua(t),f=s.raw;if(f)return f.lastIndex=u.lastIndex,e=aa(xa,f,l),u.lastIndex=f.lastIndex,e;var h=s.groups,d=Oa&&u.sticky,v=aa(sa,u),p=u.source,g=0,y=l;if(d&&(v=wa(v,"y",""),-1===ba(v,"g")&&(v+="g"),y=Ea(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==ma(l,u.lastIndex-1))&&(p="(?: "+p+")",y=" "+y,g++),n=new RegExp("^(?:"+p+")",v)),Ca&&(n=new RegExp("^"+p+"$(?!\\s)",v)),Sa&&(r=u.lastIndex),i=aa(ya,d?n:u,y),d?i?(i.input=Ea(i.input,g),i[0]=Ea(i[0],g),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:Sa&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),Ca&&i&&i.length>1&&aa(ga,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=ha(null),o=0;o<h.length;o++)a[(c=h[o])[0]]=i[c[1]];return i});var ka=xa;Nr({target:"RegExp",proto:!0,forced:/./.exec!==ka},{exec:ka});var Aa=Function.prototype,ja=Aa.apply,Ia=Aa.bind,Pa=Aa.call,Ta="object"==typeof Reflect&&Reflect.apply||(Ia?Pa.bind(ja):function(){return Pa.apply(ja,arguments)}),La=O,Ma=ze.exports,Ra=ka,_a=s,Ha=$t,Da=Ne,Ya=Ha("species"),Fa=RegExp.prototype,Na=function(t,e,n,r){var i=Ha(t),o=!_a((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!_a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ya]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var c=La(/./[i]),u=e(i,""[t],(function(t,e,n,r,i){var a=La(t),u=e.exec;return u===Ra||u===Fa.exec?o&&!i?{done:!0,value:c(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));Ma(String.prototype,t,u[0]),Ma(Fa,i,u[1])}r&&Da(Fa[i],"sham",!0)},za=B,Ba=j,Xa=$t("match"),Wa=hi,Ga=dt,Qa=c.TypeError,Ua=Te,Ka=function(t){if(Wa(t))return t;throw Qa(Ga(t)+" is not a constructor")},Za=$t("species"),Va=function(t,e){var n,r=Ua(t).constructor;return void 0===r||null==(n=Ua(r)[Za])?e:Ka(n)},Ja=O,qa=Xn,$a=Oo,tc=H,ec=Ja("".charAt),nc=Ja("".charCodeAt),rc=Ja("".slice),ic=function(t){return function(e,n){var r,i,o=$a(tc(e)),a=qa(n),c=o.length;return a<0||a>=c?t?"":void 0:(r=nc(o,a))<55296||r>56319||a+1===c||(i=nc(o,a+1))<56320||i>57343?t?ec(o,a):r:t?rc(o,a,a+2):i-56320+(r-55296<<10)+65536}},oc={codeAt:ic(!1),charAt:ic(!0)}.charAt,ac=function(t,e,n){return e+(n?oc(t,e).length:1)},cc=Un,uc=qn,sc=gi,lc=c.Array,fc=Math.max,hc=h,dc=Te,vc=N,pc=j,gc=ka,yc=c.TypeError,xc=function(t,e){var n=t.exec;if(vc(n)){var r=hc(n,t,e);return null!==r&&dc(r),r}if("RegExp"===pc(t))return hc(gc,t,e);throw yc("RegExp#exec called on incompatible receiver")},mc=Ta,bc=h,wc=O,Ec=Na,Sc=function(t){var e;return za(t)&&(void 0!==(e=t[Xa])?!!e:"RegExp"==Ba(t))},Oc=Te,Cc=H,kc=Va,Ac=ac,jc=Vn,Ic=Oo,Pc=mt,Tc=function(t,e,n){for(var r=uc(t),i=cc(e,r),o=cc(void 0===n?r:n,r),a=lc(fc(o-i,0)),c=0;i<o;i++,c++)sc(a,c,t[i]);return a.length=c,a},Lc=xc,Mc=ka,Rc=s,_c=Po.UNSUPPORTED_Y,Hc=4294967295,Dc=Math.min,Yc=[].push,Fc=wc(/./.exec),Nc=wc(Yc),zc=wc("".slice),Bc=!Rc((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Ec("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=Ic(Cc(this)),i=void 0===n?Hc:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Sc(t))return bc(e,r,t,i);for(var o,a,c,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,s+"g");(o=bc(Mc,f,r))&&!((a=f.lastIndex)>l&&(Nc(u,zc(r,l,o.index)),o.length>1&&o.index<r.length&&mc(Yc,u,Tc(o,1)),c=o[0].length,l=a,u.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!c&&Fc(f,"")||Nc(u,""):Nc(u,zc(r,l)),u.length>i?Tc(u,0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:bc(e,this,t,n)}:e,[function(e,n){var i=Cc(this),o=null==e?void 0:Pc(e,t);return o?bc(o,e,i,n):bc(r,Ic(i),e,n)},function(t,i){var o=Oc(this),a=Ic(t),c=n(r,o,a,i,r!==e);if(c.done)return c.value;var u=kc(o,RegExp),s=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(_c?"g":"y"),f=new u(_c?"^(?:"+o.source+")":o,l),h=void 0===i?Hc:i>>>0;if(0===h)return[];if(0===a.length)return null===Lc(f,a)?[a]:[];for(var d=0,v=0,p=[];v<a.length;){f.lastIndex=_c?0:v;var g,y=Lc(f,_c?zc(a,v):a);if(null===y||(g=Dc(jc(f.lastIndex+(_c?v:0)),a.length))===d)v=Ac(a,v,s);else{if(Nc(p,zc(a,d,v)),p.length===h)return p;for(var x=1;x<=y.length-1;x++)if(Nc(p,y[x]),p.length===h)return p;v=d=g}}return Nc(p,zc(a,d)),p}]}),!Bc,_c);var Xc=O,Wc=Rt,Gc=Math.floor,Qc=Xc("".charAt),Uc=Xc("".replace),Kc=Xc("".slice),Zc=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Vc=/\$([$&'`]|\d{1,2})/g,Jc=Ta,qc=h,$c=O,tu=Na,eu=s,nu=Te,ru=N,iu=Xn,ou=Vn,au=Oo,cu=H,uu=ac,su=mt,lu=function(t,e,n,r,i,o){var a=n+t.length,c=r.length,u=Vc;return void 0!==i&&(i=Wc(i),u=Zc),Uc(o,u,(function(o,u){var s;switch(Qc(u,0)){case"$":return"$";case"&":return t;case"`":return Kc(e,0,n);case"'":return Kc(e,a);case"<":s=i[Kc(u,1,-1)];break;default:var l=+u;if(0===l)return o;if(l>c){var f=Gc(l/10);return 0===f?o:f<=c?void 0===r[f-1]?Qc(u,1):r[f-1]+Qc(u,1):o}s=r[l-1]}return void 0===s?"":s}))},fu=xc,hu=$t("replace"),du=Math.max,vu=Math.min,pu=$c([].concat),gu=$c([].push),yu=$c("".indexOf),xu=$c("".slice),mu="$0"==="a".replace(/./,"$0"),bu=!!/./[hu]&&""===/./[hu]("a","$0");tu("replace",(function(t,e,n){var r=bu?"$":"$0";return[function(t,n){var r=cu(this),i=null==t?void 0:su(t,hu);return i?qc(i,t,r,n):qc(e,au(r),t,n)},function(t,i){var o=nu(this),a=au(t);if("string"==typeof i&&-1===yu(i,r)&&-1===yu(i,"$<")){var c=n(e,o,a,i);if(c.done)return c.value}var u=ru(i);u||(i=au(i));var s=o.global;if(s){var l=o.unicode;o.lastIndex=0}for(var f=[];;){var h=fu(o,a);if(null===h)break;if(gu(f,h),!s)break;""===au(h[0])&&(o.lastIndex=uu(a,ou(o.lastIndex),l))}for(var d,v="",p=0,g=0;g<f.length;g++){for(var y=au((h=f[g])[0]),x=du(vu(iu(h.index),a.length),0),m=[],b=1;b<h.length;b++)gu(m,void 0===(d=h[b])?d:String(d));var w=h.groups;if(u){var E=pu([y],m,x,a);void 0!==w&&gu(E,w);var S=au(Jc(i,void 0,E))}else S=lu(y,a,x,m,w,i);x>=p&&(v+=xu(a,p,x)+S,p=x+y.length)}return v+xu(a,p)}]}),!!eu((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!mu||bu);var wu=$o,Eu=ke,Su=$t("unscopables"),Ou=Array.prototype;null==Ou[Su]&&Eu.f(Ou,Su,{configurable:!0,value:wu(null)});var Cu=function(t){Ou[Su][t]=!0},ku=rr.includes,Au=Cu;Nr({target:"Array",proto:!0},{includes:function(t){return ku(this,t,arguments.length>1?arguments[1]:void 0)}}),Au("includes");var ju=qr,Iu=Wr?{}.toString:function(){return"[object "+ju(this)+"]"},Pu=Wr,Tu=ze.exports,Lu=Iu;Pu||Tu(Object.prototype,"toString",Lu,{unsafe:!0});var Mu=c.Promise,Ru=ze.exports,_u=c,Hu=N,Du=_u.String,Yu=_u.TypeError,Fu=O,Nu=Te,zu=function(t){if("object"==typeof t||Hu(t))return t;throw Yu("Can't set "+Du(t)+" as a prototype")},Bu=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Fu(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Nu(n),zu(r),e?t(n,r):n.__proto__=r,n}}():void 0),Xu=ke.f,Wu=Dt,Gu=$t("toStringTag"),Qu=Q,Uu=ke,Ku=l,Zu=$t("species"),Vu=U,Ju=c.TypeError,qu={},$u=qu,ts=$t("iterator"),es=Array.prototype,ns=qr,rs=mt,is=qu,os=$t("iterator"),as=function(t){if(null!=t)return rs(t,os)||rs(t,"@@iterator")||is[ns(t)]},cs=h,us=yt,ss=Te,ls=dt,fs=as,hs=c.TypeError,ds=h,vs=Te,ps=mt,gs=fo,ys=h,xs=Te,ms=dt,bs=function(t){return void 0!==t&&($u.Array===t||es[ts]===t)},ws=qn,Es=U,Ss=function(t,e){var n=arguments.length<2?fs(t):e;if(us(n))return ss(cs(n,t));throw hs(ls(t)+" is not iterable")},Os=as,Cs=function(t,e,n){var r,i;vs(t);try{if(!(r=ps(t,"return"))){if("throw"===e)throw n;return n}r=ds(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return vs(r),n},ks=c.TypeError,As=function(t,e){this.stopped=t,this.result=e},js=As.prototype,Is=$t("iterator"),Ps=!1;try{var Ts=0,Ls={next:function(){return{done:!!Ts++}},return:function(){Ps=!0}};Ls[Is]=function(){return this},Array.from(Ls,(function(){throw 2}))}catch(t){}var Ms,Rs,_s,Hs,Ds=/(?:ipad|iphone|ipod).*applewebkit/i.test(K),Ys="process"==j(c.process),Fs=c,Ns=Ta,zs=fo,Bs=N,Xs=Dt,Ws=s,Gs=Fo,Qs=wi,Us=ve,Ks=Ds,Zs=Ys,Vs=Fs.setImmediate,Js=Fs.clearImmediate,qs=Fs.process,$s=Fs.Dispatch,tl=Fs.Function,el=Fs.MessageChannel,nl=Fs.String,rl=0,il={},ol="onreadystatechange";try{Ms=Fs.location}catch(t){}var al=function(t){if(Xs(il,t)){var e=il[t];delete il[t],e()}},cl=function(t){return function(){al(t)}},ul=function(t){al(t.data)},sl=function(t){Fs.postMessage(nl(t),Ms.protocol+"//"+Ms.host)};Vs&&Js||(Vs=function(t){var e=Qs(arguments,1);return il[++rl]=function(){Ns(Bs(t)?t:tl(t),void 0,e)},Rs(rl),rl},Js=function(t){delete il[t]},Zs?Rs=function(t){qs.nextTick(cl(t))}:$s&&$s.now?Rs=function(t){$s.now(cl(t))}:el&&!Ks?(Hs=(_s=new el).port2,_s.port1.onmessage=ul,Rs=zs(Hs.postMessage,Hs)):Fs.addEventListener&&Bs(Fs.postMessage)&&!Fs.importScripts&&Ms&&"file:"!==Ms.protocol&&!Ws(sl)?(Rs=sl,Fs.addEventListener("message",ul,!1)):Rs=ol in Us("script")?function(t){Gs.appendChild(Us("script")).onreadystatechange=function(){Gs.removeChild(this),al(t)}}:function(t){setTimeout(cl(t),0)});var ll,fl,hl,dl,vl,pl,gl,yl,xl={set:Vs,clear:Js},ml=c,bl=/ipad|iphone|ipod/i.test(K)&&void 0!==ml.Pebble,wl=/web0s(?!.*chrome)/i.test(K),El=c,Sl=fo,Ol=u.f,Cl=xl.set,kl=Ds,Al=bl,jl=wl,Il=Ys,Pl=El.MutationObserver||El.WebKitMutationObserver,Tl=El.document,Ll=El.process,Ml=El.Promise,Rl=Ol(El,"queueMicrotask"),_l=Rl&&Rl.value;_l||(ll=function(){var t,e;for(Il&&(t=Ll.domain)&&t.exit();fl;){e=fl.fn,fl=fl.next;try{e()}catch(t){throw fl?dl():hl=void 0,t}}hl=void 0,t&&t.enter()},kl||Il||jl||!Pl||!Tl?!Al&&Ml&&Ml.resolve?((gl=Ml.resolve(void 0)).constructor=Ml,yl=Sl(gl.then,gl),dl=function(){yl(ll)}):Il?dl=function(){Ll.nextTick(ll)}:(Cl=Sl(Cl,El),dl=function(){Cl(ll)}):(vl=!0,pl=Tl.createTextNode(""),new Pl(ll).observe(pl,{characterData:!0}),dl=function(){pl.data=vl=!vl}));var Hl=_l||function(t){var e={fn:t,next:void 0};hl&&(hl.next=e),fl||(fl=e,dl()),hl=e},Dl={},Yl=yt,Fl=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Yl(e),this.reject=Yl(n)};Dl.f=function(t){return new Fl(t)};var Nl=Te,zl=B,Bl=Dl,Xl=c,Wl=function(){this.head=null,this.tail=null};Wl.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Gl,Ql,Ul,Kl,Zl=Wl,Vl="object"==typeof window,Jl=Nr,ql=c,$l=Q,tf=h,ef=Mu,nf=ze.exports,rf=function(t,e,n){for(var r in e)Ru(t,r,e[r],n);return t},of=Bu,af=function(t,e,n){t&&!n&&(t=t.prototype),t&&!Wu(t,Gu)&&Xu(t,Gu,{configurable:!0,value:e})},cf=function(t){var e=Qu(t),n=Uu.f;Ku&&e&&!e[Zu]&&n(e,Zu,{configurable:!0,get:function(){return this}})},uf=yt,sf=N,lf=B,ff=function(t,e){if(Vu(e,t))return t;throw Ju("Incorrect invocation")},hf=Ke,df=function(t,e,n){var r,i,o,a,c,u,s,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=gs(e,l),p=function(t){return r&&Cs(r,"normal",t),new As(!0,t)},g=function(t){return f?(xs(t),d?v(t[0],t[1],p):v(t[0],t[1])):d?v(t,p):v(t)};if(h)r=t;else{if(!(i=Os(t)))throw ks(ms(t)+" is not iterable");if(bs(i)){for(o=0,a=ws(t);a>o;o++)if((c=g(t[o]))&&Es(js,c))return c;return new As(!1)}r=Ss(t,i)}for(u=r.next;!(s=ys(u,r)).done;){try{c=g(s.value)}catch(t){Cs(r,"throw",t)}if("object"==typeof c&&c&&Es(js,c))return c}return new As(!1)},vf=function(t,e){if(!e&&!Ps)return!1;var n=!1;try{var r={};r[Is]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},pf=Va,gf=xl.set,yf=Hl,xf=function(t,e){if(Nl(t),zl(e)&&e.constructor===t)return e;var n=Bl.f(t);return(0,n.resolve)(e),n.promise},mf=function(t,e){var n=Xl.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},bf=Dl,wf=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ef=Zl,Sf=En,Of=Lr,Cf=Vl,kf=Ys,Af=et,jf=$t("species"),If="Promise",Pf=Sf.getterFor(If),Tf=Sf.set,Lf=Sf.getterFor(If),Mf=ef&&ef.prototype,Rf=ef,_f=Mf,Hf=ql.TypeError,Df=ql.document,Yf=ql.process,Ff=bf.f,Nf=Ff,zf=!!(Df&&Df.createEvent&&ql.dispatchEvent),Bf=sf(ql.PromiseRejectionEvent),Xf="unhandledrejection",Wf=!1,Gf=Of(If,(function(){var t=hf(Rf),e=t!==String(Rf);if(!e&&66===Af)return!0;if(Af>=51&&/native code/.test(t))return!1;var n=new Rf((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[jf]=r,!(Wf=n.then((function(){}))instanceof r)||!e&&Cf&&!Bf})),Qf=Gf||!vf((function(t){Rf.all(t).catch((function(){}))})),Uf=function(t){var e;return!(!lf(t)||!sf(e=t.then))&&e},Kf=function(t,e){var n,r,i,o=e.value,a=1==e.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===e.rejection&&$f(e),e.rejection=1),!0===c?n=o:(l&&l.enter(),n=c(o),l&&(l.exit(),i=!0)),n===t.promise?s(Hf("Promise-chain cycle")):(r=Uf(n))?tf(r,n,u,s):u(n)):s(o)}catch(t){l&&!i&&l.exit(),s(t)}},Zf=function(t,e){t.notified||(t.notified=!0,yf((function(){for(var n,r=t.reactions;n=r.get();)Kf(n,t);t.notified=!1,e&&!t.rejection&&Jf(t)})))},Vf=function(t,e,n){var r,i;zf?((r=Df.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),ql.dispatchEvent(r)):r={promise:e,reason:n},!Bf&&(i=ql["on"+t])?i(r):t===Xf&&mf("Unhandled promise rejection",n)},Jf=function(t){tf(gf,ql,(function(){var e,n=t.facade,r=t.value;if(qf(t)&&(e=wf((function(){kf?Yf.emit("unhandledRejection",r,n):Vf(Xf,n,r)})),t.rejection=kf||qf(t)?2:1,e.error))throw e.value}))},qf=function(t){return 1!==t.rejection&&!t.parent},$f=function(t){tf(gf,ql,(function(){var e=t.facade;kf?Yf.emit("rejectionHandled",e):Vf("rejectionhandled",e,t.value)}))},th=function(t,e,n){return function(r){t(e,r,n)}},eh=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Zf(t,!0))},nh=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Hf("Promise can't be resolved itself");var r=Uf(e);r?yf((function(){var n={done:!1};try{tf(r,e,th(nh,n,t),th(eh,n,t))}catch(e){eh(n,e,t)}})):(t.value=e,t.state=1,Zf(t,!1))}catch(e){eh({done:!1},e,t)}}};if(Gf&&(_f=(Rf=function(t){ff(this,_f),uf(t),tf(Gl,this);var e=Pf(this);try{t(th(nh,e),th(eh,e))}catch(t){eh(e,t)}}).prototype,(Gl=function(t){Tf(this,{type:If,done:!1,notified:!1,parent:!1,reactions:new Ef,rejection:!1,state:0,value:void 0})}).prototype=rf(_f,{then:function(t,e){var n=Lf(this),r=Ff(pf(this,Rf));return n.parent=!0,r.ok=!sf(t)||t,r.fail=sf(e)&&e,r.domain=kf?Yf.domain:void 0,0==n.state?n.reactions.add(r):yf((function(){Kf(r,n)})),r.promise},catch:function(t){return this.then(void 0,t)}}),Ql=function(){var t=new Gl,e=Pf(t);this.promise=t,this.resolve=th(nh,e),this.reject=th(eh,e)},bf.f=Ff=function(t){return t===Rf||t===Ul?new Ql(t):Nf(t)},sf(ef)&&Mf!==Object.prototype)){Kl=Mf.then,Wf||(nf(Mf,"then",(function(t,e){var n=this;return new Rf((function(t,e){tf(Kl,n,t,e)})).then(t,e)}),{unsafe:!0}),nf(Mf,"catch",_f.catch,{unsafe:!0}));try{delete Mf.constructor}catch(t){}of&&of(Mf,_f)}Jl({global:!0,wrap:!0,forced:Gf},{Promise:Rf}),af(Rf,If,!1),cf(If),Ul=$l(If),Jl({target:If,stat:!0,forced:Gf},{reject:function(t){var e=Ff(this);return tf(e.reject,void 0,t),e.promise}}),Jl({target:If,stat:!0,forced:Gf},{resolve:function(t){return xf(this,t)}}),Jl({target:If,stat:!0,forced:Qf},{all:function(t){var e=this,n=Ff(e),r=n.resolve,i=n.reject,o=wf((function(){var n=uf(e.resolve),o=[],a=0,c=1;df(t,(function(t){var u=a++,s=!1;c++,tf(n,e,t).then((function(t){s||(s=!0,o[u]=t,--c||r(o))}),i)})),--c||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Ff(e),r=n.reject,i=wf((function(){var i=uf(e.resolve);df(t,(function(t){tf(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var rh=Rt,ih=Un,oh=qn,ah=function(t){for(var e=rh(this),n=oh(e),r=arguments.length,i=ih(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:ih(o,n);a>i;)e[i++]=t;return e},ch=Cu;Nr({target:"Array",proto:!0},{fill:ah}),ch("fill");var uh="\t\n\v\f\r                　\u2028\u2029\ufeff",sh=H,lh=Oo,fh=O("".replace),hh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",dh=RegExp("^"+hh+hh+"*"),vh=RegExp(hh+hh+"*$"),ph=function(t){return function(e){var n=lh(sh(e));return 1&t&&(n=fh(n,dh,"")),2&t&&(n=fh(n,vh,"")),n}},gh={start:ph(1),end:ph(2),trim:ph(3)},yh=c,xh=s,mh=O,bh=Oo,wh=gh.trim,Eh=uh,Sh=yh.parseInt,Oh=yh.Symbol,Ch=Oh&&Oh.iterator,kh=/^[+-]?0x/i,Ah=mh(kh.exec),jh=8!==Sh(Eh+"08")||22!==Sh(Eh+"0x16")||Ch&&!xh((function(){Sh(Object(Ch))}))?function(t,e){var n=wh(bh(t));return Sh(n,e>>>0||(Ah(kh,n)?16:10))}:Sh;Nr({global:!0,forced:parseInt!=jh},{parseInt:jh});var Ih=s,Ph=Nr,Th=rr.indexOf,Lh=function(t,e){var n=[][t];return!!n&&Ih((function(){n.call(null,e||function(){throw 1},1)}))},Mh=O([].indexOf),Rh=!!Mh&&1/Mh([1],1,-0)<0,_h=Lh("indexOf");Ph({target:"Array",proto:!0,forced:Rh||!_h},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return Rh?Mh(this,t,e)||0:Th(this,t,e)}});var Hh=Rt,Dh=Mo;Nr({target:"Object",stat:!0,forced:s((function(){Dh(1)}))},{keys:function(t){return Dh(Hh(t))}});var Yh=function(){function t(){n(this,t)}return i(t,null,[{key:"createEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1?arguments[1]:void 0,n=e.styles,r=void 0===n?{}:n,i=e.attrs,o=void 0===i?{}:i,a=e.props,c=void 0===a?{}:a,u=document.createElement(t);return Object.keys(r).map((function(t){u.style[t]=r[t]})),Object.keys(o).map((function(t){u.setAttribute(t,o[t])})),Object.keys(c).map((function(t){u[t]=c[t]})),u}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setAttr",value:function(t,e,n){t.setAttribute(e,n)}},{key:"delAttr",value:function(t,e){t.removeAttribute(e)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}}]),t}();function Fh(t,e){var n=e.canvasWidth,r=e.canvasHeight,i=e.arrowSize;t.save(),t.beginPath(),t.moveTo(e.points[0].x*n,e.points[0].y*r);for(var o=function(t,e,n,r){var i=function(t,e,n){var r=Math.atan2(e.y-t.y,e.x-t.x),i=.6,o=.3,a=n/3*2,c={x:e.x-Math.round(n*Math.cos(r+i)),y:e.y-Math.round(n*Math.sin(r+i))},u={x:e.x-Math.round(n*Math.cos(r-i)),y:e.y-Math.round(n*Math.sin(r-i))},s={x:e.x-Math.round(a*Math.cos(r+o)),y:e.y-Math.round(a*Math.sin(r+o))};return[t,{x:e.x-Math.round(a*Math.cos(r-o)),y:e.y-Math.round(a*Math.sin(r-o))},u,e,c,s]}(n,e,r);!function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fill()}(t,i)},a=1;a<e.points.length;a++)o(t,{x:e.points[a].x*n,y:e.points[a].y*r},{x:e.points[a-1].x*n,y:e.points[a-1].y*r},i);t.restore()}function Nh(t){return zh.apply(this,arguments)}function zh(){return(zh=e(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onerror=n,r.onload=function(){return t(r)},r.src=e})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bh(t,n,r){return new Promise(function(){var i=e(regeneratorRuntime.mark((function e(i,o){var a,c,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.toDataURL("image/".concat(r)),c=Yh.createEl("canvas",{styles:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")},attrs:{width:t.width,height:t.height}}),u=c.getContext("2d"),e.next=5,Nh(n);case 5:return!(s=e.sent)&&o(),u.drawImage(s,0,0,t.width,t.height),e.next=10,Nh(a);case 10:!(l=e.sent)&&o(),u.drawImage(l,0,0,t.width,t.height),i(c.toDataURL("image/".concat(r)));case 14:case"end":return e.stop()}}),e)})));return function(t,e){return i.apply(this,arguments)}}())}function Xh(t,e,n,r){var i=t.getBoundingClientRect();return{x:(n-i.left-parseInt(e.paddingLeft)-parseInt(e.borderLeftWidth))*(t.width/parseInt(e.width)),y:(r-i.top-parseInt(e.paddingTop)-parseInt(e.borderTopWidth))*(t.height/parseInt(e.height))}}var Wh=Nr,Gh=c,Qh=Un,Uh=Xn,Kh=qn,Zh=Rt,Vh=Wi,Jh=gi,qh=bi("splice"),$h=Gh.TypeError,td=Math.max,ed=Math.min,nd=9007199254740991,rd="Maximum allowed length exceeded";Wh({target:"Array",proto:!0,forced:!qh},{splice:function(t,e){var n,r,i,o,a,c,u=Zh(this),s=Kh(u),l=Qh(t,s),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=s-l):(n=f-2,r=ed(td(Uh(e),0),s-l)),s+n-r>nd)throw $h(rd);for(i=Vh(u,r),o=0;o<r;o++)(a=l+o)in u&&Jh(i,o,u[a]);if(i.length=r,n<r){for(o=l;o<s-r;o++)c=o+n,(a=o+r)in u?u[c]=u[a]:delete u[c];for(o=s;o>s-r+n;o--)delete u[o-1]}else if(n>r)for(o=s-r;o>l;o--)c=o+n-1,(a=o+r-1)in u?u[c]=u[a]:delete u[c];for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=s-r+n,i}});var id=function(){function t(){n(this,t),this._event={}}return i(t,[{key:"on",value:function(t,e){var n=this._event;t in n||(n[t]=[]),n[t].push(e)}},{key:"off",value:function(t,e){var n=this._event;if(t in n){e||(n[t]=[]);var r=n[t].indexOf(e);r>=0&&n[t].splice(r,1)}}},{key:"trigger",value:function(t,e){var n=this._event;if(n[t])for(var r=0;r<n[t].length;r++){n[t][r].call(this,e)}}},{key:"removeAllListeners",value:function(){this._event={}}}]),t}(),od=function(){function t(e){n(this,t);var r=e.container,i=e.bgImg,o=void 0===i?"":i,a=e.lineColor,c=void 0===a?"#f00":a,u=e.lineWidth,s=void 0===u?"1":u,l=e.arrowSize,f=void 0===l?15:l,h=e.eraserSize,d=void 0===h?10:h,v=e.canvasBgColor,p=void 0===v?"#fff":v,g=e.textFontSize,y=void 0===g?16:g,x=e.textLineHeight,m=void 0===x?20:x,b=e.textColor,w=void 0===b?"#f00":b,E=e.textareaPlaceholder,S=void 0===E?-1!==navigator.language.indexOf("zh")?"请点击输入":"Type here...":E,O=e.ratio,C=void 0===O?window.devicePixelRatio||1:O;if(!r)throw Error("No container element were found...");this.configuration={bgImg:o,ratio:C,lineColor:c,lineWidth:s*C,arrowSize:f*C,eraserSize:d*C,textFontSize:y*C,textLineHeight:m*C,textColor:w,canvasBgColor:p,textareaPlaceholder:S},this.container=this.createCanvasOuterBox(r),this.canvas=this.createCanvasEl(this.container,this),this.context=this.canvas.getContext("2d"),this.mode="pencil",this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.originX=null,this.originY=null,this.arrowPoints=[],this.isDrawing=!1,this.image=new Image,this.textareaEl=null,this.measureEl=null,this.historyImage=new Image,this.undoQueue=[],this.redoQueue=[],this.firstDraw=null,this.evt=new id,this.init()}var r;return i(t,[{key:"createCanvasOuterBox",value:function(t){var e=Yh.createEl("div",{styles:{height:"".concat(t.clientHeight,"px"),width:"".concat(t.clientWidth,"px"),position:"relative",top:"0"}});return Yh.appendChild(t,e),e}},{key:"createCanvasEl",value:function(t,e){var n=Yh.createEl("canvas",{styles:{height:"".concat(t.clientHeight,"px"),width:"".concat(t.clientWidth,"px")},attrs:{width:t.clientWidth*e.configuration.ratio,height:t.clientHeight*e.configuration.ratio}});return Yh.appendChild(t,n),n}},{key:"init",value:function(){this.canvas_style=window.getComputedStyle(this.canvas),this.context.lineCap="round",this.clear(),this.setBackground(),this.createTextMeasure(),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.endOfDrawing.bind(this)),this.canvas.addEventListener("mouseleave",this.endOfDrawing.bind(this))}},{key:"mouseDown",value:function(t){this.isDrawing=!0,this.image.src=this.canvas.toDataURL("image/png"),this.redoQueue.length=0;var e=t.clientX,n=t.clientY,r=Xh(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y;this.originX=i,this.originY=o,this.ft_originX=this.originX,this.ft_originY=this.originY,this.context.moveTo(this.originX,this.originY),this.context.lineWidth=this.configuration.lineWidth,this.context.strokeStyle=this.configuration.lineColor,this.context.fillStyle=this.configuration.lineColor,this.context.beginPath(),"arrow"===this.mode&&this.saveArrowPoint({x:this.originX,y:this.originY}),"text"===this.mode&&this.createTextArea({x:this.ft_originX,y:this.ft_originY}),this.mode&&"text"!==this.mode&&this.evt.trigger("drawBegin",{x:i,y:o,clientX:e,clientY:n})}},{key:"mouseMove",value:function(t){if(this.isDrawing){var e=t.clientX,n=t.clientY,r=Xh(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y,a=this.originX,c=this.originY,u=Math.abs(i-this.originX),s=Math.abs(o-this.originY);i<this.originX&&(a=i),o<this.originY&&(c=o);var l={x:i,y:o,originX:this.originY,originY:this.originY,newOriginX:a,newOriginY:c,distanceX:u,distanceY:s,ft_originX:this.ft_originX,ft_originY:this.ft_originY},f=this.handleMousemove()[this.mode];f&&f(l),this.mode&&"text"!==this.mode&&this.evt.trigger("drawing",{x:i,y:o,clientX:e,clientY:n})}}},{key:"reDraw",value:function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.drawImage(this.image,0,0),this.context.beginPath()}},{key:"endOfDrawing",value:function(t){if(this.isDrawing){var e=t.clientX,n=t.clientY,r=Xh(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y;this.context.closePath(),this.isDrawing=!1,this.addHistory(),this.mode&&"text"!==this.mode&&this.evt.trigger("drawEnd",{x:i,y:o,clientX:e,clientY:n})}}},{key:"addHistory",value:function(){var t=this.canvas.toDataURL("image/png");this.undoQueue.push(t);var e=this.undoQueue.length;e>20&&(this.firstDraw=this.undoQueue[0],this.undoQueue=this.undoQueue.slice(-20,e))}},{key:"setBackground",value:function(){this.configuration.bgImg&&(this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.canvas.style.background="url(".concat(this.configuration.bgImg,")"),this.canvas.style.backgroundSize="100% 100%",this.canvas.style.backgroundPosition="center",this.canvas.style.backgroundRepeat="no-repeat",this.context.globalCompositeOperation="source-over")}},{key:"handleMousemove",value:function(){var t=this;return{pencil:function(e){var n=e.x,r=e.y;t.context.lineTo(n,r),t.context.stroke()},straightLine:function(e){var n=e.x,r=e.y,i=e.ft_originX,o=e.ft_originY;t.reDraw(),t.context.moveTo(i,o),t.context.lineTo(n,r),t.context.stroke()},rect:function(e){var n=e.newOriginX,r=e.newOriginY,i=e.distanceX,o=e.distanceY;t.reDraw(),t.context.rect(n,r,i,o),t.context.stroke(),t.context.closePath()},circle:function(e){var n=e.newOriginX,r=e.newOriginY,i=e.distanceX,o=e.distanceY;t.reDraw();var a=Math.sqrt(i*i+o*o);t.context.arc(n+i,r+o,a,0,2*Math.PI),t.context.stroke()},arrow:function(e){var n=e.x,r=e.y;t.reDraw(),t.arrowPoints[1]={x:n/t.canvasWidth,y:r/t.canvasHeight},Fh(t.context,{points:t.arrowPoints,arrowSize:t.configuration.arrowSize,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight})},eraser:function(e){var n=e.x,r=e.y;t.configuration.bgImg&&(t.context.globalCompositeOperation="destination-out"),t.context.strokeStyle=t.configuration.canvasBgColor,t.context.fillStyle=t.configuration.canvasBgColor,t.context.lineWidth=t.configuration.eraserSize,t.context.lineTo(n,r),t.context.stroke()},clear:function(){return t.clear()}}}},{key:"saveArrowPoint",value:function(t){this.arrowPoints=[],this.arrowPoints.push({x:t.x/this.canvasWidth,y:t.y/this.canvasHeight})}},{key:"createTextMeasure",value:function(){this.measureEl&&(Yh.removeChild(this.container,this.measureEl),this.measureEl=null),this.measureEl=Yh.createEl("pre",{styles:{fontSize:"".concat(this.configuration.textFontSize,"px"),lineHeight:"".concat(this.configuration.textLineHeight,"px"),color:this.configuration.textColor}}),Yh.addClass(this.measureEl,"__edb-text-pre"),Yh.appendChild(this.container,this.measureEl)}},{key:"drawText",value:function(t,e){e.font=e.font||'"PingFang SC","Microsoft YaHei","微软雅黑"';var n=e.text;t.save(),t.textBaseline="middle",t.font="".concat(e.textFontSize,"px/").concat(e.textLineHeight,"px ").concat(e.font),t.fillStyle=e.textColor,t.globalCompositeOperation="source-over",n.replace(/<br>/g,"\n").split(/\n/).map((function(n,r){t.fillText(n,e.position.x+2,e.position.y+r*e.textLineHeight+e.textLineHeight/2+2)})),t.restore()}},{key:"createTextArea",value:function(t){var e=this;this.mode=null,this.boxDom&&Yh.removeChild(this.container,this.boxDom),this.boxDom=Yh.createEl("div",{styles:{position:"absolute",left:"".concat(t.x/this.configuration.ratio,"px"),top:"".concat(t.y/this.configuration.ratio,"px"),lineHeight:"".concat(this.configuration.textLineHeight/this.configuration.ratio,"px"),fontSize:"".concat(this.configuration.textFontSize/this.configuration.ratio,"px")}}),Yh.addClass(this.boxDom,"__edb-textarea-box"),this.textareaEl=Yh.createEl("textarea",{styles:{color:this.configuration.textColor,lineHeight:"".concat(this.configuration.textLineHeight/this.configuration.ratio,"px"),fontSize:"".concat(this.configuration.textFontSize/this.configuration.ratio,"px")},props:{placeholder:this.configuration.textareaPlaceholder}}),Yh.addClass(this.textareaEl,"__edb-textarea"),Yh.appendChild(this.boxDom,this.textareaEl),Yh.appendChild(this.container,this.boxDom),setTimeout((function(){e.textareaEl.focus(),e.textareaEl.onblur=function(){e.mode=null,e.drawText(e.context,{text:e.textareaEl.value,textColor:e.configuration.textColor,textFontSize:e.configuration.textFontSize,textLineHeight:e.configuration.textLineHeight,position:t}),Yh.removeChild(e.container,e.boxDom),e.boxDom=null,e.textareaEl=null},e.textareaEl.addEventListener("input",(function(t){e.measureEl.innerHTML=t.target.value+" ",e.textareaEl.style.width=e.measureEl.clientWidth/e.configuration.ratio+"px",e.textareaEl.style.height=e.measureEl.clientHeight/e.configuration.ratio+"px"}))}),50)}},{key:"resetBgImg",value:function(){this.redoQueue.length=0,this.undoQueue.length=0,this.clear(!1),this.setBackground()}},{key:"config",value:function(t,e){switch(["lineWidth","arrowSize","eraserSize","textFontSize","textLineHeight"].includes(t)?this.configuration[t]=e*this.configuration.ratio:this.configuration[t]=e,t){case"canvasBgColor":this.clear(!1);break;case"bgImg":this.resetBgImg();break;case"textFontSize":case"textColor":case"textLineHeight":this.createTextMeasure()}}},{key:"setMode",value:function(t){this.context.globalCompositeOperation="source-over",this.context.strokeStyle=this.configuration.lineColor,this.context.fillStyle=this.configuration.lineColor,this.context.lineWidth=this.configuration.lineWidth,"eraser"===t?Yh.addClass(this.container,"__edb-eraser-hover"):Yh.removeClass(this.container,"__edb-eraser-hover"),this.mode=t}},{key:"undo",value:function(){var t=this,e=this.undoQueue.length;if(0!==e){if(1===e){if(!this.firstDraw)return this.redoQueue.push(this.undoQueue.pop()),void this.clear(!1);this.historyImage.src=this.firstDraw}else this.historyImage.src=this.undoQueue[e-2];this.historyImage.onload=function(){t.clear(!1),t.context.drawImage(t.historyImage,0,0),t.redoQueue.push(t.undoQueue.pop())}}}},{key:"redo",value:function(){var t=this;0!==this.redoQueue.length&&(this.undoQueue.push(this.redoQueue.pop()),this.historyImage.src=this.undoQueue[this.undoQueue.length-1],this.historyImage.onload=function(){t.clear(!1),t.context.drawImage(t.historyImage,0,0)})}},{key:"generateBase64",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";return new Promise(function(){var r=e(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.configuration.bgImg){e.next=7;break}return e.next=3,Bh(t.canvas,t.configuration.bgImg,n);case 3:i=e.sent,r(i),e.next=8;break;case 7:r(t.canvas.toDataURL("image/".concat(n)));case 8:case"end":return e.stop()}}),e)})));return function(t){return r.apply(this,arguments)}}())}},{key:"saveImg",value:(r=e(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{type:"png",fileName:"canvas_image"},n=null,!this.configuration.bgImg){t.next=8;break}return t.next=5,Bh(this.canvas,this.configuration.bgImg,e.type);case 5:n=t.sent,t.next=9;break;case 8:n=this.canvas.toDataURL("image/".concat(e.type));case 9:Yh.createEl("a",{attrs:{href:n,download:"".concat(e.fileName,".").concat(e.type)}}).click();case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"clear",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.context.fillStyle=this.configuration.canvasBgColor,this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.configuration.bgImg&&(this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.globalCompositeOperation="source-over"),this.undoQueue.length&&t){var e=this.canvas.toDataURL("image/png");this.undoQueue.push(e)}}}]),t}();return od}();
